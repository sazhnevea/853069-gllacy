var feedback=document.querySelector(".map-feedback"),popup=document.querySelector(".feedback"),close=document.querySelector(".close-button"),yourname=popup.querySelector(".feedback-header-name"),youremail=popup.querySelector(".feedback-header-email"),something=popup.querySelector(".feedback-header-something"),form=popup.querySelector("form"),storage="",isStorageSupport=!0;try{storage=localStorage.getItem("youremail")}catch(e){isStorageSupport=!1}close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("feedbackpopup")}),form.addEventListener("submit",function(e){yourname.value&&youremail.value&&something.value?isStorageSupport&&localStorage.setItem("email",youremail.value):(e.preventDefault(),console.log("нужно заполнить все поля"))}),feedback.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("feedbackpopup"),storage?(youremail.value=storage,yourname.focus()):youremail.focus()}),window.addEventListener("keydown",function(e){27===e.keycode&&popup.classlist.contains("feedbackpopup")&&(e.preventDefault(),popup.classList.remove("feedbackpopup"))});